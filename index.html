<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>SmartBin</title>

<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>

<style>
body{
margin:0;
font-family:'Kanit',sans-serif;
background:#eef2f6;
height:100vh;
display:flex;
flex-direction:column;
}

.header{
padding:15px 25px;
background:white;
box-shadow:0 2px 6px rgba(0,0,0,0.05);
}

.header h2{margin:0;font-weight:600;}
.header span{font-size:13px;color:#888;}

.tabs{
display:flex;
justify-content:center;
margin:15px;
}

.tab{
padding:10px 25px;
border-radius:25px;
background:#e5e7eb;
margin:0 5px;
cursor:pointer;
}

.tab.active{
background:linear-gradient(90deg,#10b981,#2563eb);
color:white;
}

.page{display:none;flex:1;}

.camera-card{
margin:0 40px;
background:#0f1c2e;
border-radius:20px;
flex:1;
display:flex;
align-items:center;
justify-content:center;
position:relative;
overflow:hidden;
}

canvas{
width:100%;
height:100%;
object-fit:cover;
}

.placeholder{
color:#94a3b8;
text-align:center;
}

.switch-btn{
position:absolute;
top:15px;
right:15px;
background:rgba(255,255,255,0.2);
border:none;
border-radius:50%;
width:40px;
height:40px;
color:white;
cursor:pointer;
display:none;
}

.result-panel{
background:white;
padding:20px 30px;
border-radius:20px 20px 0 0;
}

.result-row{margin-bottom:12px;}

.progress-track{
height:18px;
background:#eee;
border-radius:8px;
overflow:hidden;
position:relative;
}

.progress-fill{
height:100%;
width:0%;
background:linear-gradient(90deg,#10b981,#3b82f6);
transition:0.2s;
}

.percent-text{
position:absolute;
right:8px;
top:50%;
transform:translateY(-50%);
font-size:12px;
}

.bottom-btn{
margin:15px 40px 25px;
padding:14px;
border:none;
border-radius:30px;
background:linear-gradient(90deg,#10b981,#2563eb);
color:white;
font-size:16px;
cursor:pointer;
}

/* INFO DROPDOWN */

.dropdown{
background:white;
border-radius:15px;
margin-bottom:12px;
box-shadow:0 2px 8px rgba(0,0,0,0.05);
overflow:hidden;
}

.dropdown-header{
padding:15px 20px;
cursor:pointer;
display:flex;
justify-content:space-between;
font-weight:500;
}

.dropdown-body{
max-height:0;
overflow:hidden;
padding:0 20px;
font-size:14px;
color:#555;
transition:max-height 0.4s ease,padding 0.3s ease;
}
</style>
</head>

<body>

<div class="header">
<h2>SmartBin</h2>
<span>AI Plastic Bottle Detector</span>
</div>

<div class="tabs">
<div class="tab active" onclick="showCamera()">üì∑ ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö</div>
<div class="tab" onclick="showInfo()">‚ÑπÔ∏è ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å</div>
</div>

<!-- CAMERA PAGE -->
<div id="cameraPage" class="page" style="display:flex;flex-direction:column;">
<div class="camera-card">

<div class="placeholder" id="placeholder">
<span class="material-icons" style="font-size:60px;">no_photography</span>
<p>‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î</p>
</div>

<button class="switch-btn" id="switchBtn" onclick="switchCamera()">
<span class="material-icons">flip_camera_ios</span>
</button>

<div id="webcam-container"></div>

</div>

<div class="result-panel" id="result-panel"></div>
<button class="bottom-btn" onclick="toggleCamera()">‡πÄ‡∏õ‡∏¥‡∏î / ‡∏õ‡∏¥‡∏î ‡∏Å‡∏•‡πâ‡∏≠‡∏á</button>
</div>

<!-- INFO PAGE -->
<div id="infoPage" class="page">
<div style="padding:30px;max-width:700px;margin:auto;">

<h2 style="margin-bottom:10px;">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å</h2>
<p style="font-size:14px;color:#666;margin-bottom:25px;">
‡∏£‡∏∞‡∏ö‡∏ö SmartBin ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡πÅ‡∏¢‡∏Å‡∏Ç‡∏¢‡∏∞‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
</p>

<!-- PET -->
<div class="dropdown">
<div class="dropdown-header" onclick="toggleDrop(this)">
PET (1)
<span>+</span>
</div>
<div class="dropdown-body">
<b>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏°:</b> Polyethylene Terephthalate<br>
<b>‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:</b> ‡∏Ç‡∏ß‡∏î‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏° ‡∏Ç‡∏ß‡∏î‡∏ô‡πâ‡∏≥‡∏≠‡∏±‡∏î‡∏•‡∏°<br><br>
‚úî ‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡∏á‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î<br>
‚úî ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏ö‡∏≤<br>
‚ö† ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡∏ã‡πâ‡∏≥‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á<br><br>
<b>‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏¥‡πâ‡∏á:</b> ‡∏•‡πâ‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏™‡∏∞‡∏≠‡∏≤‡∏î ‡∏ö‡∏µ‡∏ö‡πÉ‡∏´‡πâ‡πÅ‡∏ö‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏¥‡πâ‡∏á
</div>
</div>

<!-- HDPE -->
<div class="dropdown">
<div class="dropdown-header" onclick="toggleDrop(this)">
HDPE (2)
<span>+</span>
</div>
<div class="dropdown-body">
<b>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏°:</b> High-Density Polyethylene<br>
<b>‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:</b> ‡∏Ç‡∏ß‡∏î‡πÅ‡∏ä‡∏°‡∏û‡∏π ‡πÅ‡∏Å‡∏•‡∏•‡∏≠‡∏ô ‡∏ñ‡∏±‡∏á‡∏ô‡πâ‡∏≥<br><br>
‚úî ‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á ‡∏ó‡∏ô‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ<br>
‚úî ‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡πÑ‡∏î‡πâ‡∏î‡∏µ<br><br>
<b>‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏¥‡πâ‡∏á:</b> ‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡∏£‡∏≤‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏´‡∏•‡∏ß‡∏≠‡∏≠‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏¥‡πâ‡∏á
</div>
</div>

<!-- OTHER -->
<div class="dropdown">
<div class="dropdown-header" onclick="toggleDrop(this)">
Other (7)
<span>+</span>
</div>
<div class="dropdown-body">
<b>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:</b> ‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡∏ú‡∏™‡∏° ‡πÄ‡∏ä‡πà‡∏ô PC, ABS<br>
<b>‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:</b> ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ö‡∏≤‡∏á‡∏ä‡∏ô‡∏¥‡∏î ‡∏ù‡∏≤‡∏Ç‡∏ß‡∏î‡∏ö‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó<br><br>
‚ùå ‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡∏¢‡∏≤‡∏Å<br>
‚ö† ‡∏ö‡∏≤‡∏á‡∏ä‡∏ô‡∏¥‡∏î‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏™‡∏≤‡∏£ BPA<br><br>
<b>‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</b> ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏¥‡πâ‡∏á
</div>
</div>

<!-- SECTION ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° -->
<div style="
margin-top:30px;
background:#f8fafc;
padding:20px;
border-radius:15px;
">

<h3 style="margin-top:0;">‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏¢‡∏Å‡∏Ç‡∏¢‡∏∞?</h3>

<ul style="padding-left:18px;font-size:14px;line-height:1.7;">
<li>‡∏•‡∏î‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏Ç‡∏¢‡∏∞‡∏ù‡∏±‡∏á‡∏Å‡∏•‡∏ö</li>
<li>‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡πÇ‡∏•‡∏Å‡∏£‡πâ‡∏≠‡∏ô</li>
<li>‡∏•‡∏î‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏¢‡∏∞</li>
<li>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•</li>
</ul>

</div>

<!-- FACT BOX -->
<div style="
margin-top:20px;
background:linear-gradient(90deg,#10b981,#2563eb);
color:white;
padding:18px;
border-radius:15px;
font-size:14px;
">

<b>‡πÄ‡∏Å‡∏£‡πá‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ:</b><br>
‡∏Ç‡∏ß‡∏î PET 1 ‡∏Ç‡∏ß‡∏î ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ú‡πâ‡∏≤‡πÇ‡∏û‡∏•‡∏µ‡πÄ‡∏≠‡∏™‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ!

</div>

</div>
</div>


<script>

const URL="https://teachablemachine.withgoogle.com/models/EV-mbCqpx/";

let model, webcam;
let isCameraOn=false;
let currentFacingMode="environment";
let loopId=null;

async function loadModel(){
model=await tmImage.load(URL+"model.json",URL+"metadata.json");
createBars();
}
loadModel();

function createBars(){
const panel=document.getElementById("result-panel");
panel.innerHTML="";
model.getClassLabels().forEach(label=>{
const id=label.replace(/\s+/g,'');
panel.innerHTML+=`
<div class="result-row">
<div>${label}</div>
<div class="progress-track">
<span class="percent-text" id="text-${id}">0%</span>
<div class="progress-fill" id="bar-${id}"></div>
</div>
</div>`;
});
}

function showCamera(){
document.getElementById("cameraPage").style.display="flex";
document.getElementById("infoPage").style.display="none";
setActive(0);
}

function showInfo(){
document.getElementById("cameraPage").style.display="none";
document.getElementById("infoPage").style.display="block";
setActive(1);
}

function setActive(i){
document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
document.querySelectorAll(".tab")[i].classList.add("active");
}

async function toggleCamera(){
if(isCameraOn){ await stopCamera(); }
else{ await startCamera(); }
}

async function startCamera(){
const flip=currentFacingMode==="user";
webcam=new tmImage.Webcam(400,400,flip);
await webcam.setup({facingMode:currentFacingMode});
await webcam.play();
document.getElementById("webcam-container").innerHTML="";
document.getElementById("webcam-container").appendChild(webcam.canvas);
document.getElementById("placeholder").style.display="none";
document.getElementById("switchBtn").style.display="block";
isCameraOn=true;
loop();
}

async function stopCamera(){
if(loopId) cancelAnimationFrame(loopId);
if(webcam) await webcam.stop();
document.getElementById("webcam-container").innerHTML="";
document.getElementById("placeholder").style.display="block";
document.getElementById("switchBtn").style.display="none";
resetBars();
isCameraOn=false;
}

async function switchCamera(){
if(!isCameraOn) return;
currentFacingMode =
currentFacingMode==="environment" ? "user" : "environment";
await webcam.stop();
await startCamera();
}

async function loop(){
if(!isCameraOn) return;
webcam.update();
await predict();
loopId=requestAnimationFrame(loop);
}

async function predict(){
const prediction=await model.predict(webcam.canvas);
prediction.forEach(p=>{
const percent=Math.round(p.probability*100);
const id=p.className.replace(/\s+/g,'');
document.getElementById("bar-"+id).style.width=percent+"%";
document.getElementById("text-"+id).innerText=percent+"%";
});
}

function resetBars(){
document.querySelectorAll(".progress-fill").forEach(e=>e.style.width="0%");
document.querySelectorAll(".percent-text").forEach(e=>e.innerText="0%");
}

/* DROPDOWN */
function toggleDrop(header){
const allBodies=document.querySelectorAll(".dropdown-body");
const allHeaders=document.querySelectorAll(".dropdown-header span");

allBodies.forEach(b=>{
b.style.maxHeight=null;
b.style.padding="0 20px";
});
allHeaders.forEach(h=>h.innerText="+");

const body=header.nextElementSibling;

if(body.style.maxHeight){
body.style.maxHeight=null;
header.querySelector("span").innerText="+";
}else{
body.style.maxHeight=body.scrollHeight+"px";
body.style.padding="15px 20px";
header.querySelector("span").innerText="-";
}
}

</script>
</body>
</html>

