<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>SmartBin</title>

<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>

<style>
body{
margin:0;
font-family:'Kanit',sans-serif;
background:#eef2f6;
height:100vh;
display:flex;
flex-direction:column;
}

/* HEADER */
.header{
padding:15px 25px;
background:white;
box-shadow:0 2px 6px rgba(0,0,0,0.05);
}
.header h2{margin:0;font-weight:600;}
.header span{font-size:13px;color:#888;}

/* TABS */
.tabs{
display:flex;
justify-content:center;
margin:15px;
}
.tab{
padding:10px 25px;
border-radius:25px;
background:#e5e7eb;
margin:0 5px;
cursor:pointer;
}
.tab.active{
background:linear-gradient(90deg,#10b981,#2563eb);
color:white;
}

/* PAGE */
.page{display:none;flex:1;}

/* CAMERA PAGE */
.camera-card{
margin:0 40px;
background:#0f1c2e;
border-radius:20px;
flex:1;
display:flex;
align-items:center;
justify-content:center;
position:relative;
overflow:hidden;
}
canvas{
width:100%;
height:100%;
object-fit:cover;
}

.placeholder{
color:#94a3b8;
text-align:center;
}

.switch-btn{
position:absolute;
top:15px;
right:15px;
background:rgba(255,255,255,0.2);
border:none;
border-radius:50%;
width:40px;
height:40px;
color:white;
cursor:pointer;
display:none;
}

.result-panel{
background:white;
padding:20px 30px;
border-radius:20px 20px 0 0;
}

.result-row{
margin-bottom:12px;
}

.progress-track{
height:18px;
background:#eee;
border-radius:8px;
overflow:hidden;
position:relative;
}

.progress-fill{
height:100%;
width:0%;
background:linear-gradient(90deg,#10b981,#3b82f6);
transition:0.2s;
}

.percent-text{
position:absolute;
right:8px;
top:50%;
transform:translateY(-50%);
font-size:12px;
}

.bottom-btn{
margin:15px 40px 25px;
padding:14px;
border:none;
border-radius:30px;
background:linear-gradient(90deg,#10b981,#2563eb);
color:white;
font-size:16px;
cursor:pointer;
}

</style>
</head>

<body>

<div class="header">
<h2>SmartBin</h2>
<span>AI Plastic Bottle Detector</span>
</div>

<div class="tabs">
<div class="tab active" onclick="showCamera()">üì∑ ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö</div>
<div class="tab" onclick="showInfo()">‚ÑπÔ∏è ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å</div>
</div>

<!-- CAMERA PAGE -->
<div id="cameraPage" class="page" style="display:flex;flex-direction:column;">

<div class="camera-card">
<div class="placeholder" id="placeholder">
<span class="material-icons" style="font-size:60px;">no_photography</span>
<p>‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î</p>
</div>

<button class="switch-btn" id="switchBtn" onclick="switchCamera()">
<span class="material-icons">flip_camera_ios</span>
</button>

<div id="webcam-container"></div>

</div>

<div class="result-panel" id="result-panel"></div>

<button class="bottom-btn" onclick="toggleCamera()">‡πÄ‡∏õ‡∏¥‡∏î / ‡∏õ‡∏¥‡∏î ‡∏Å‡∏•‡πâ‡∏≠‡∏á</button>
</div>


<!-- INFO PAGE -->
<div id="infoPage" class="page">
<div style="padding:30px 40px;">

<h2 style="margin-top:0;">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å</h2>
<p style="color:#666;font-size:14px;">
‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏≠‡∏á‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡πÑ‡∏î‡πâ ‡πÅ‡∏•‡∏∞‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏ó‡∏¥‡πâ‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
</p>

<hr style="margin:20px 0;">

<!-- PET -->
<div style="margin-bottom:25px;">
<h3 style="color:#10b981;">PET (1)</h3>
<p><b>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏°:</b> Polyethylene Terephthalate</p>
<p><b>‡∏û‡∏ö‡πÉ‡∏ô:</b> ‡∏Ç‡∏ß‡∏î‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏° ‡∏Ç‡∏ß‡∏î‡∏ô‡πâ‡∏≥‡∏≠‡∏±‡∏î‡∏•‡∏° ‡∏Ç‡∏ß‡∏î‡∏ä‡∏≤ ‡∏Å‡∏≤‡πÅ‡∏ü</p>
<p><b>‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥:</b> ‡πÉ‡∏™ ‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏ö‡∏≤</p>
<p><b>‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•:</b> ‚úî ‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡∏á‡πà‡∏≤‡∏¢</p>
<p><b>‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</b> ‡∏•‡πâ‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏™‡∏∞‡∏≠‡∏≤‡∏î ‡∏ö‡∏µ‡∏ö‡πÉ‡∏´‡πâ‡πÅ‡∏ö‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏¥‡πâ‡∏á</p>
</div>

<hr>

<!-- HDPE -->
<div style="margin:25px 0;">
<h3 style="color:#2563eb;">HDPE (2)</h3>
<p><b>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏ï‡πá‡∏°:</b> High-Density Polyethylene</p>
<p><b>‡∏û‡∏ö‡πÉ‡∏ô:</b> ‡∏Ç‡∏ß‡∏î‡πÅ‡∏ä‡∏°‡∏û‡∏π ‡∏Ç‡∏ß‡∏î‡∏ô‡πâ‡∏≥‡∏¢‡∏≤‡∏ã‡∏±‡∏Å‡∏ú‡πâ‡∏≤ ‡πÅ‡∏Å‡∏•‡∏•‡∏≠‡∏ô ‡∏ñ‡∏±‡∏á‡∏ô‡πâ‡∏≥</p>
<p><b>‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥:</b> ‡∏ó‡∏∂‡∏ö ‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á ‡∏ó‡∏ô‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ</p>
<p><b>‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•:</b> ‚úî ‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡πÑ‡∏î‡πâ‡∏î‡∏µ</p>
<p><b>‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</b> ‡πÄ‡∏ó‡∏Ç‡∏≠‡∏á‡πÄ‡∏´‡∏•‡∏ß‡∏≠‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡∏´‡∏°‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏¥‡πâ‡∏á</p>
</div>

<hr>

<!-- OTHER -->
<div style="margin:25px 0;">
<h3 style="color:#ef4444;">Other (‡∏≠‡∏∑‡πà‡∏ô ‡πÜ)</h3>
<p><b>‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á:</b> PC, ABS, Nylon ‡πÅ‡∏•‡∏∞‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡∏ú‡∏™‡∏°‡∏´‡∏•‡∏≤‡∏¢‡∏ä‡∏ô‡∏¥‡∏î</p>
<p><b>‡∏û‡∏ö‡πÉ‡∏ô:</b> ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ö‡∏≤‡∏á‡∏ä‡∏ô‡∏¥‡∏î ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå ‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡πÅ‡∏Ç‡πá‡∏á‡∏û‡∏¥‡πÄ‡∏®‡∏©</p>
<p><b>‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•:</b> ‚ùå ‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡∏¢‡∏≤‡∏Å ‡∏´‡∏£‡∏∑‡∏≠‡∏ö‡∏≤‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ö</p>
<p><b>‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</b> ‡∏Ñ‡∏ß‡∏£‡πÅ‡∏¢‡∏Å‡∏ó‡∏¥‡πâ‡∏á‡∏ï‡∏≤‡∏°‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Ç‡∏≠‡∏á‡πÄ‡∏ó‡∏®‡∏ö‡∏≤‡∏•</p>
</div>

<hr>

<h3>‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡∏ó‡∏µ‡πà‡∏î‡∏µ</h3>

<ul style="font-size:14px; color:#444; line-height:1.6;">
<li>‚úî ‡∏•‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏ä‡∏ô‡∏∞‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏¥‡πâ‡∏á</li>
<li>‚úî ‡πÅ‡∏¢‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ï‡∏≤‡∏°‡∏£‡∏´‡∏±‡∏™‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•</li>
<li>‚úî ‡∏ö‡∏µ‡∏ö‡∏Ç‡∏ß‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà</li>
<li>‚ùå ‡∏≠‡∏¢‡πà‡∏≤‡∏ó‡∏¥‡πâ‡∏á‡∏õ‡∏ô‡∏Å‡∏±‡∏ö‡∏Ç‡∏¢‡∏∞‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å</li>
<li>‚ùå ‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏ú‡∏≤‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å</li>
</ul>

</div>
</div>


<script>

const URL="https://teachablemachine.withgoogle.com/models/EV-mbCqpx/";

let model, webcam, maxPredictions;
let isCameraOn=false;
let currentFacingMode="environment";
let loopId=null;

/* ‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏°‡πÄ‡∏î‡∏• */
async function loadModel(){
model=await tmImage.load(URL+"model.json",URL+"metadata.json");
maxPredictions=model.getTotalClasses();
createBars();
}
loadModel();

/* ‡∏™‡∏£‡πâ‡∏≤‡∏á progress bars ‡∏ï‡∏≤‡∏° label ‡∏à‡∏£‡∏¥‡∏á */
function createBars(){
const panel=document.getElementById("result-panel");
panel.innerHTML="";

model.getClassLabels().forEach(label=>{
const safeId=label.replace(/\s+/g,'');
panel.innerHTML+=`
<div class="result-row">
<div>${label}</div>
<div class="progress-track">
<span class="percent-text" id="text-${safeId}">0%</span>
<div class="progress-fill" id="bar-${safeId}"></div>
</div>
</div>
`;
});
}

/* Tabs */
function showCamera(){
document.getElementById("cameraPage").style.display="flex";
document.getElementById("infoPage").style.display="none";
setActiveTab(0);
}

function showInfo(){
document.getElementById("cameraPage").style.display="none";
document.getElementById("infoPage").style.display="block";
setActiveTab(1);

if(isCameraOn){
stopCamera();
}
}

function setActiveTab(index){
document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
document.querySelectorAll(".tab")[index].classList.add("active");
}

/* ‡∏Å‡∏•‡πâ‡∏≠‡∏á */
async function toggleCamera(){
if(isCameraOn){
stopCamera();
}else{
initWebcam();
}


async function initWebcam(){

const flip = currentFacingMode === "user"; // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤ ‡πÉ‡∏´‡πâ flip

webcam = new tmImage.Webcam(400, 400, flip);

await webcam.setup({ facingMode: currentFacingMode });
await webcam.play();

document.getElementById("placeholder").style.display="none";
document.getElementById("switchBtn").style.display="block";
document.getElementById("webcam-container").appendChild(webcam.canvas);

isCameraOn=true;
loopId=requestAnimationFrame(loop);
}


document.getElementById("placeholder").style.display="none";
document.getElementById("switchBtn").style.display="block";
document.getElementById("webcam-container").appendChild(webcam.canvas);

isCameraOn=true;
loopId=requestAnimationFrame(loop);
}

async function stopCamera(){
await stopLoop();
if(webcam) await webcam.stop();
document.getElementById("webcam-container").innerHTML="";
document.getElementById("placeholder").style.display="block";
document.getElementById("switchBtn").style.display="none";
resetBars();
isCameraOn=false;
}

async function switchCamera(){
currentFacingMode=currentFacingMode==="environment"?"user":"environment";
if(isCameraOn){
await stopCamera();
initWebcam();
}
}

async function loop(){
if(webcam&&isCameraOn){
webcam.update();
await predict();
loopId=requestAnimationFrame(loop);
}
}

async function predict(){
const prediction=await model.predict(webcam.canvas);

prediction.forEach(p=>{
const percent=Math.round(p.probability*100);
updateBar(p.className,percent);
});
}

function updateBar(label,percent){
const safeId=label.replace(/\s+/g,'');
const bar=document.getElementById("bar-"+safeId);
const text=document.getElementById("text-"+safeId);

if(bar){
bar.style.width=percent+"%";
text.innerText=percent+"%";
}
}

function resetBars(){
document.querySelectorAll(".progress-fill").forEach(e=>e.style.width="0%");
document.querySelectorAll(".percent-text").forEach(e=>e.innerText="0%");
}

async function stopLoop(){
if(loopId) cancelAnimationFrame(loopId);
}

</script>

</body>
</html>




