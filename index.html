<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>SmartBin</title>

<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>

<style>
body{
margin:0;
font-family:'Kanit',sans-serif;
background:#eef2f6;
height:100vh;
display:flex;
flex-direction:column;
}

/* HEADER */
.header{
padding:15px 25px;
background:white;
box-shadow:0 2px 6px rgba(0,0,0,0.05);
}
.header h2{margin:0;font-weight:600;}
.header span{font-size:13px;color:#888;}

/* TABS */
.tabs{
display:flex;
justify-content:center;
margin:15px;
}
.tab{
padding:10px 25px;
border-radius:25px;
background:#e5e7eb;
margin:0 5px;
cursor:pointer;
}
.tab.active{
background:linear-gradient(90deg,#10b981,#2563eb);
color:white;
}

/* PAGE */
.page{display:none;flex:1;}

/* CAMERA PAGE */
.camera-card{
margin:0 40px;
background:#0f1c2e;
border-radius:20px;
flex:1;
display:flex;
align-items:center;
justify-content:center;
position:relative;
overflow:hidden;
}
canvas{width:100%;height:100%;object-fit:cover;}
.placeholder{color:#94a3b8;text-align:center;}
.switch-btn{
position:absolute;
top:15px;
right:15px;
background:rgba(255,255,255,0.2);
border:none;
border-radius:50%;
width:40px;
height:40px;
color:white;
display:none;
cursor:pointer;
}
.result-panel{
background:white;
padding:20px 30px;
border-radius:20px 20px 0 0;
}
.result-row{margin-bottom:10px;}
.progress-track{
height:18px;
background:#eee;
border-radius:8px;
overflow:hidden;
position:relative;
}
.progress-fill{
height:100%;
width:0%;
background:linear-gradient(90deg,#10b981,#3b82f6);
transition:0.2s;
}
.percent-text{
position:absolute;
right:8px;
top:50%;
transform:translateY(-50%);
font-size:12px;
}

.bottom-btn{
margin:15px 40px 25px;
padding:14px;
border:none;
border-radius:30px;
background:linear-gradient(90deg,#10b981,#2563eb);
color:white;
font-size:16px;
cursor:pointer;
}

/* INFO PAGE */
.info-container{
margin:20px 40px;
}
.accordion{
background:white;
border-radius:15px;
margin-bottom:10px;
overflow:hidden;
box-shadow:0 2px 6px rgba(0,0,0,0.05);
}
.accordion-header{
padding:15px;
cursor:pointer;
display:flex;
justify-content:space-between;
font-weight:500;
}
.accordion-content{
padding:15px;
display:none;
font-size:14px;
color:#555;
}
.scan-frame{
position:absolute;
width:65%;
height:55%;
border:2px solid rgba(255,255,255,0.7);
border-radius:20px;
pointer-events:none;
box-sizing:border-box;
}

/* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠ */
.camera-card{
position:relative;
}

</style>
</head>

<body>

<div class="header">
<h2>SmartBin</h2>
<span>AI Plastic Bottle Detector</span>
</div>

<div class="tabs">
<div class="tab active" onclick="showCamera()">üì∑ ‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö</div>
<div class="tab" onclick="showInfo()">‚ÑπÔ∏è ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å</div>
</div>

<!-- CAMERA PAGE -->
<div id="cameraPage" class="page" style="display:flex;flex-direction:column;">
<div class="camera-card">
<div class="placeholder" id="placeholder">
<span class="material-icons" style="font-size:60px;">no_photography</span>
<p>‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î</p>
</div>

<button class="switch-btn" id="switchBtn" onclick="switchCamera()">
<span class="material-icons">flip_camera_ios</span>
</button>

<div id="webcam-container"></div>
<div class="scan-frame"></div>

</div>

<div class="result-panel" id="result-panel"></div>

<button class="bottom-btn" onclick="toggleCamera()">‡πÄ‡∏õ‡∏¥‡∏î / ‡∏õ‡∏¥‡∏î ‡∏Å‡∏•‡πâ‡∏≠‡∏á</button>
</div>




<!-- INFO PAGE -->
<div id="infoPage" class="page">
<div class="info-container">

<!-- Highlight Card -->
<div style="background:linear-gradient(90deg,#10b981,#2563eb);
color:white;
padding:25px;
border-radius:20px;
margin-bottom:25px;">
<h3 style="margin:0 0 10px 0;">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å</h3>
<p style="margin:0;font-size:14px;">
‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏≠‡∏á‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡πÅ‡∏•‡∏∞‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏Ç‡∏¢‡∏∞‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
</p>
</div>

<!-- Stats -->
<div style="display:grid;
grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
gap:15px;
margin-bottom:25px;">

<div style="background:white;padding:20px;border-radius:15px;text-align:center;">
<h3 style="margin:0;">8 ‡∏•‡πâ‡∏≤‡∏ô‡∏ï‡∏±‡∏ô</h3>
<p style="font-size:12px;color:#777;">‡∏Ç‡∏¢‡∏∞‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å/‡∏õ‡∏µ</p>
</div>

<div style="background:white;padding:20px;border-radius:15px;text-align:center;">
<h3 style="margin:0;">91%</h3>
<p style="font-size:12px;color:#777;">‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•</p>
</div>

<div style="background:white;padding:20px;border-radius:15px;text-align:center;">
<h3 style="margin:0;">500 ‡∏õ‡∏µ</h3>
<p style="font-size:12px;color:#777;">‡πÄ‡∏ß‡∏•‡∏≤‡∏¢‡πà‡∏≠‡∏¢‡∏™‡∏•‡∏≤‡∏¢</p>
</div>

<div style="background:white;padding:20px;border-radius:15px;text-align:center;">
<h3 style="margin:0;">60%</h3>
<p style="font-size:12px;color:#777;">‡∏•‡∏î‡∏Ñ‡∏≤‡∏£‡πå‡∏ö‡∏≠‡∏ô‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•</p>
</div>

</div>

<!-- Plastic Types -->
<h4>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡πÑ‡∏î‡πâ</h4>

<div class="accordion">
<div class="accordion-header" onclick="toggleAccordion(this)">
PET (1)
<span>‚ñº</span>
</div>
<div class="accordion-content">
Polyethylene Terephthalate<br><br>
‚úî ‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡πÑ‡∏î‡πâ<br>
‚úî ‡πÉ‡∏ä‡πâ‡∏ó‡∏≥‡∏Ç‡∏ß‡∏î‡∏ô‡πâ‡∏≥ ‡∏Ç‡∏ß‡∏î‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°<br>
‚ö† ‡∏Ñ‡∏ß‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏¥‡πâ‡∏á
</div>
</div>

<div class="accordion">
<div class="accordion-header" onclick="toggleAccordion(this)">
HDPE (2)
<span>‚ñº</span>
</div>
<div class="accordion-content">
High-Density Polyethylene<br><br>
‚úî ‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡πÑ‡∏î‡πâ<br>
‚úî ‡πÉ‡∏ä‡πâ‡∏ó‡∏≥‡∏Ç‡∏ß‡∏î‡πÅ‡∏ä‡∏°‡∏û‡∏π ‡∏ñ‡∏±‡∏á‡∏ô‡πâ‡∏≥<br>
‚úî ‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á ‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô
</div>
</div>


<div class="accordion">
<div class="accordion-header" onclick="toggleAccordion(this)">
‡∏≠‡∏∑‡πà‡∏ô ‡πÜ (7)
<span>‚ñº</span>
</div>
<div class="accordion-content">
‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏∑‡πà‡∏ô ‡πÄ‡∏ä‡πà‡∏ô PC, ABS<br><br>
‚ùå ‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡∏¢‡∏≤‡∏Å<br>
‚ö† ‡∏ö‡∏≤‡∏á‡∏ä‡∏ô‡∏¥‡∏î‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏™‡∏≤‡∏£‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢
</div>
</div>

<!-- Do & Don't -->
<div style="background:#f1f5f9;
padding:20px;
border-radius:15px;
margin-top:30px;">

<h4>‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•‡∏ó‡∏µ‡πà‡∏î‡∏µ</h4>

<div style="display:grid;
grid-template-columns:1fr 1fr;
gap:20px;">

<div>
<h5 style="color:green;margin-bottom:8px;">‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥</h5>
<ul style="padding-left:18px;margin:0;font-size:14px;">
<li>‡∏•‡πâ‡∏≤‡∏á‡∏†‡∏≤‡∏ä‡∏ô‡∏∞‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏¥‡πâ‡∏á</li>
<li>‡πÅ‡∏¢‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ï‡∏≤‡∏°‡∏£‡∏´‡∏±‡∏™</li>
<li>‡∏ö‡∏µ‡∏ö‡∏Ç‡∏ß‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏•‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà</li>
<li>‡∏ó‡∏¥‡πâ‡∏á‡∏•‡∏á‡∏ñ‡∏±‡∏á‡∏£‡∏µ‡πÑ‡∏ã‡πÄ‡∏Ñ‡∏¥‡∏•</li>
</ul>
</div>

<div>
<h5 style="color:red;margin-bottom:8px;">‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥</h5>
<ul style="padding-left:18px;margin:0;font-size:14px;">
<li>‡∏ó‡∏¥‡πâ‡∏á‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ö‡∏Ç‡∏¢‡∏∞‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</li>
<li>‡πÉ‡∏™‡πà‡∏Ç‡∏≠‡∏á‡πÄ‡∏´‡∏•‡∏ß‡∏õ‡∏ô</li>
<li>‡πÄ‡∏ú‡∏≤‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å</li>
<li>‡∏ó‡∏¥‡πâ‡∏á‡∏ú‡∏¥‡∏î‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</li>
</ul>
</div>

</div>
</div>

</div>
</div>


<script>
const URL="https://teachablemachine.withgoogle.com/models/EV-mbCqpx/";

let model,webcam,maxPredictions;
let isCameraOn=false;
let currentFacingMode="environment";
let loopId=null;

async function loadModel(){
model=await tmImage.load(URL+"model.json",URL+"metadata.json");
maxPredictions=model.getTotalClasses();
createBars();
}
loadModel();

function showCamera(){
document.getElementById("cameraPage").style.display="flex";
document.getElementById("infoPage").style.display="none";
setActiveTab(0);

if(isCameraOn){
initWebcam();
}
}

async function showInfo(){
document.getElementById("cameraPage").style.display="none";
document.getElementById("infoPage").style.display="block";
setActiveTab(1);

if(isCameraOn){
await stopLoop();
await webcam.stop();
document.getElementById("webcam-container").innerHTML="";
}
}

function setActiveTab(index){
document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
document.querySelectorAll(".tab")[index].classList.add("active");
}

function toggleAccordion(header){
const content=header.nextElementSibling;
content.style.display=content.style.display==="block"?"none":"block";
}

function createBars(){
const panel=document.getElementById("result-panel");
for(let i=0;i<maxPredictions;i++){
const name=model.getClassLabels()[i];
panel.innerHTML+=`
<div class="result-row">
<div>${name}</div>
<div class="progress-track">
<span class="percent-text" id="text-${name}">0%</span>
<div class="progress-fill" id="bar-${name}"></div>
</div>
</div>
`;
}
}

async function toggleCamera(){
if(isCameraOn){
await stopLoop();
await webcam.stop();
document.getElementById("webcam-container").innerHTML="";
document.getElementById("placeholder").style.display="block";
document.getElementById("switchBtn").style.display="none";
resetBars();
isCameraOn=false;
}else{
isCameraOn=true;
initWebcam();
}
}

async function initWebcam(){
webcam=new tmImage.Webcam(400,400,false);
await webcam.setup({facingMode:currentFacingMode});
await webcam.play();

document.getElementById("placeholder").style.display="none";
document.getElementById("switchBtn").style.display="block";
document.getElementById("webcam-container").appendChild(webcam.canvas);

loopId=requestAnimationFrame(loop);
}

async function switchCamera(){
currentFacingMode=currentFacingMode==="environment"?"user":"environment";
await stopLoop();
await webcam.stop();
document.getElementById("webcam-container").innerHTML="";
initWebcam();
}

async function loop(){
if(webcam&&isCameraOn){
webcam.update();
await predict();
loopId=requestAnimationFrame(loop);
}
}

async function predict(){
const prediction=await model.predict(webcam.canvas);
prediction.forEach(p=>{
const percent=Math.round(p.probability*100);
updateBar(p.className,percent);
});
}

function updateBar(label,percent){
const bar=document.getElementById("bar-"+label);
const text=document.getElementById("text-"+label);
if(bar){
bar.style.width=percent+"%";
text.innerText=percent+"%";
}
}

function resetBars(){
document.querySelectorAll(".progress-fill").forEach(e=>e.style.width="0%");
document.querySelectorAll(".percent-text").forEach(e=>e.innerText="0%");
}

async function stopLoop(){
if(loopId) cancelAnimationFrame(loopId);
}
</script>

</body>
</html>
